var __awaiter=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function o(e){try{u(i.next(e))}catch(t){s(t)}}function a(e){try{u(i["throw"](e))}catch(t){s(t)}}function u(e){e.done?n(e.value):r(e.value).then(o,a)}u((i=i.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(e){return function(t){return u([e,t])}}function u(o){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,r&&(s=o[0]&2?r["return"]:o[0]?r["throw"]||((s=r["return"])&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;if(r=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:n.label++;return{value:o[1],done:false};case 5:n.label++;r=o[1];o=[0];continue;case 7:o=n.ops.pop();n.trys.pop();continue;default:if(!(s=n.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){n.label=o[1];break}if(o[0]===6&&n.label<s[1]){n.label=s[1];s=o;break}if(s&&n.label<s[2]){n.label=s[2];n.ops.push(o);break}if(s[2])n.ops.pop();n.trys.pop();continue}o=t.call(e,n)}catch(a){o=[6,a];r=0}finally{i=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};System.register(["./p-c6d8745d.system.js","./p-73bc6424.system.js"],(function(e){"use strict";var t,n,i,r,s;return{setters:[function(e){t=e.r;n=e.h},function(e){i=e.A;r=e.T;s=e.O}],execute:function(){var o=e("ss_freedom_admin_widget",function(){function e(e){t(this,e);this.isOpen=false;this.api=new i}e.RefreshPublishedStatus=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){document.querySelectorAll("ss-freedom-admin-widget").forEach((function(e){return e.refreshPublishedStatus()}));return[2]}))}))};e.prototype.componentWillLoad=function(){if(this.stage!=="Live"){(new r).observeDom();(new s).observeDom()}};e.prototype.open=function(){this.isOpen=true};e.prototype.close=function(){this.isOpen=false};e.prototype.refreshPublishedStatus=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.api.getObjectInfo(this.pageClassName,this.pageId)];case 1:e=t.sent().published;this.isPublished=e;return[2]}}))}))};e.prototype.changeStage=function(){var e=this.stageDropdown.value;var t=new URL(window.location.toString());if(e==="Live"){t.searchParams.delete("stage")}else{t.searchParams.set("stage",e)}window.location.replace(t.toString())};e.prototype.publishPage=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:t=e.closest("button");t.disabled=true;t.classList.add("publishing");return[4,this.api.publishObject(this.pageClassName,this.pageId)];case 1:n.sent();window.location.reload();return[2]}}))}))};e.prototype.render=function(){var e=this;return n("div",{class:this.isOpen?"open":"closed"},n("form",null,n("label",null,"Stage:",n("select",{ref:function(t){return e.stageDropdown=t},onChange:function(){return e.changeStage()}},n("option",{selected:this.stage==="Stage",value:"Stage"},"Staging"),n("option",{selected:this.stage==="Live",value:"Live"},"Live"))),this.cmsEditLink&&n("a",{href:this.cmsEditLink},"Edit in CMS"),this.stage!=="Live"&&this.canPublish&&n("button",{type:"button",class:this.isPublished?"published":"publish",onClick:function(t){return e.publishPage(t.target)}},n("ion-icon",{class:"loading",name:"sync"}),n("span",null,this.isPublished?"Published":"Publish")),n("button",{type:"button",class:"close",onClick:function(){return e.close()}},n("ion-icon",{name:"close"}))),n("button",{class:"silverstripe",onClick:function(){return e.open()}}))};Object.defineProperty(e,"style",{get:function(){return"*{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif}a{color:#207ab7;-webkit-transition:color .3s;transition:color .3s;text-decoration:none}a:hover{color:#1c6ca1;text-decoration:underline}a:active{color:#185d8c}*{-webkit-box-sizing:border-box;box-sizing:border-box}\@-webkit-keyframes spin-anti{0%{-webkit-transform:rotate(1turn);transform:rotate(1turn)}to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}\@keyframes spin-anti{0%{-webkit-transform:rotate(1turn);transform:rotate(1turn)}to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}div{--easing:cubic-bezier(0.165,0.84,0.44,1);position:fixed;z-index:2;bottom:1rem;left:1rem;width:auto;height:auto;-webkit-box-sizing:content-box;box-sizing:content-box;-webkit-box-shadow:0 0 1rem rgba(0,0,0,.1);box-shadow:0 0 1rem rgba(0,0,0,.1);border:1px solid;overflow:hidden;-webkit-transition-property:border-color,border-radius,background-color,padding,max-width,max-height;transition-property:border-color,border-radius,background-color,padding,max-width,max-height;-webkit-transition-duration:.5s;transition-duration:.5s;-webkit-transition-timing-function:var(--easing);transition-timing-function:var(--easing)}div.closed{max-width:4rem;max-height:4rem;border-color:transparent;border-radius:50%;background-color:#004a7a;padding:0}div.closed form{opacity:0;pointer-events:none}div.open{border-color:#d3d3d3;border-radius:3px;background-color:#fff;padding:2rem 1rem .5rem;max-width:8rem;max-height:11rem}div.open button.silverstripe{opacity:0;pointer-events:none}button.silverstripe,form{-webkit-transition:opacity .5s var(--easing);transition:opacity .5s var(--easing)}button.silverstripe{position:absolute;color:#fff;width:4rem;height:4rem;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-size:2rem;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:none;border:0;outline:0;padding:0;display:table-cell;vertical-align:middle;text-align:center}button.silverstripe:before{display:block;content:\"M\";font-family:silverstripe;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;speak:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}form>*{display:block;margin-bottom:.5rem}form label{color:rgba(34,47,62,.7);font-size:.875rem}form select{border:1px solid #ccc;border-radius:3px;padding:.31rem .29rem;font-size:1rem;display:block}form button.publish,form button.published{position:relative}form button.published ion-icon,form button.publish ion-icon{position:absolute;top:calc(50% - .5em);left:calc(50% - .5em);display:none}form button.publish{-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:3px;border:none;padding:.25rem 1rem;font-size:1rem;font-weight:700;line-height:1.5rem;-webkit-transition:background-color .3s;transition:background-color .3s}form button.publish:disabled{color:rgba(0,0,0,.3);background-color:#f0f0f0}form button.publish:not(:disabled){color:#fff;background-color:#207ab7}form button.publish:not(:disabled):hover{background-color:#1c6ca1}form button.publish:not(:disabled):active{background-color:#185d8c}form button.published{-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:3px;border:none;padding:.25rem 1rem;font-size:1rem;font-weight:700;line-height:1.5rem;-webkit-transition:background-color .3s;transition:background-color .3s}form button.published:disabled{color:rgba(0,0,0,.3);background-color:#f0f0f0}form button.published:not(:disabled){color:#222f3e;background-color:#f0f0f0}form button.published:not(:disabled):hover{background-color:#e3e3e3}form button.published:not(:disabled):active{background-color:#d6d6d6}form button.publishing span{color:transparent}form button.publishing ion-icon{display:block;-webkit-animation:spin-anti 1s linear infinite;animation:spin-anti 1s linear infinite}form .close,form .settings{position:absolute;top:0;width:2.5rem;height:2.5rem;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;background:none}form .settings{right:2.5rem}form .close{right:0}"},enumerable:true,configurable:true});return e}())}}}));